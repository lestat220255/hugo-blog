<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>mysql开发规范 | Lester's Blog</title><meta name=keywords content="mysql"><meta name=description content="参考去哪儿网mysql规范"><meta name=author content><link rel=canonical href=https://blog.88886688.xyz/posts/2017-09-12-mysql%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/><link crossorigin=anonymous href=/assets/css/stylesheet.84a638ec294a2a547ea8ea3f2466d240b38b987cbbb815b534c0442ed8d517d7.css integrity="sha256-hKY47ClKKlR+qOo/JGbSQLOLmHy7uBW1NMBELtjVF9c=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.88886688.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.88886688.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.88886688.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.88886688.xyz/apple-touch-icon.png><link rel=mask-icon href=https://blog.88886688.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="mysql开发规范"><meta property="og:description" content="参考去哪儿网mysql规范"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.88886688.xyz/posts/2017-09-12-mysql%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-09-12T22:39:11+00:00"><meta property="article:modified_time" content="2017-09-12T22:39:11+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="mysql开发规范"><meta name=twitter:description content="参考去哪儿网mysql规范"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.88886688.xyz/posts/"},{"@type":"ListItem","position":2,"name":"mysql开发规范","item":"https://blog.88886688.xyz/posts/2017-09-12-mysql%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"mysql开发规范","name":"mysql开发规范","description":"参考去哪儿网mysql规范","keywords":["mysql"],"articleBody":"命名规范 库名、表名、字段名必须使用小写字母，并采用下划线分割 库名、表名、字段名禁用超过32个字符。须见名知意 库名、表名、字段名禁用使 MySQL保留字 临时库、表名必须以tmp为前缀，并以日期为后缀 备份库、表必须以bak为前缀，并以日期为后缀 基础规范 使用INNODB存储引擎 表字符集使用utf8mb4 所有表都需要添加注释 单表数据量建议控制在5000W以内 不在数据库中存储图片、文件等大数据 禁止在线上做数据库压力测试 禁止从测试、开发环境直连数据库 库表设计 禁止使用分区表 拆分大字段和访问频率低的字段，分离冷热数据 HASH进行散表，表名后缀使用十进制数，下标从0开始 按日期时间分表需符合YYYY[MM][DD][HH]格式 采用合适的分库分表策略。例如千库十表、十库百表等 字段设计 尽可能不使用TEXT、BLOB类型 DECIMAL代替FLOAT和DOUBLE存储精确浮点数 Simple is good 将字符转化为数字 使用TINYINT来代替ENUM类型 Generosity can be unwise 存储 “hello”时VARCHAR(5) VS VARCHAR(200) Avoid null if possible 所有字段均定义为NOT NULL ! Smaller is usually better 使用UNSIGNED存储非负整数 INT类型固定占用4字节存储 使用timestamp存储时间 使用INT UNSIGNED存储IPV4 使用VARBINARY存储大写敏感的变 字符串 禁用在数据库中存储明文密码 索引规范 索引的用途 去重 加速定位 避免排序 覆盖索引 索引数量控制 单张表中索引数量不超过5个 单个索引中的字段数不超过5个 对字符串使用前缀索引，前缀索引长度不超过8个字符 建议优先考虑前缀索引，必要时可添加伪列并建立索引 主键准则 表必须有主键 不使用更新频繁的列 尽量不选择字符串列 不使用UUID MD5 HASH 默认使用非空的唯一键 建议选择自增或发号器 重要的SQL必须被索引 UPDATE、DELETE语句的WHERE条件列 ORDER BY、GROUP BY、DISTINCT的字段 多表JOIN的字段 区分度最大的字段放在前 核心SQL优先考虑覆盖索引 避免冗余和重复索引 索引不是越多越好 综合评估数据密度和分布 考虑查询和更新比例 ","wordCount":"88","inLanguage":"en","datePublished":"2017-09-12T22:39:11.923Z","dateModified":"2017-09-12T22:39:11.923Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.88886688.xyz/posts/2017-09-12-mysql%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"},"publisher":{"@type":"Organization","name":"Lester's Blog","logo":{"@type":"ImageObject","url":"https://blog.88886688.xyz/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.88886688.xyz/ accesskey=h title="Lester's Blog (Alt + H)">Lester's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.88886688.xyz/ title="Lester's Blog"><span>Home</span></a></li><li><a href=https://blog.88886688.xyz/tags/ title=Tags><span>Tags/分类</span></a></li><li><a href=https://blog.88886688.xyz/about/ title="About Me"><span>About/关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.88886688.xyz/>Home</a>&nbsp;»&nbsp;<a href=https://blog.88886688.xyz/posts/>Posts</a></div><h1 class=post-title>mysql开发规范</h1><div class=post-description>参考去哪儿网mysql规范</div><div class=post-meta><span title='2017-09-12 22:39:11.923 +0000 UTC'>September 12, 2017</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;88 words</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%91%bd%e5%90%8d%e8%a7%84%e8%8c%83 aria-label=命名规范>命名规范</a></li><li><a href=#%e5%9f%ba%e7%a1%80%e8%a7%84%e8%8c%83 aria-label=基础规范>基础规范</a></li><li><a href=#%e5%ba%93%e8%a1%a8%e8%ae%be%e8%ae%a1 aria-label=库表设计>库表设计</a></li><li><a href=#%e5%ad%97%e6%ae%b5%e8%ae%be%e8%ae%a1 aria-label=字段设计>字段设计</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e8%a7%84%e8%8c%83 aria-label=索引规范>索引规范</a><ul><li><a href=#%e7%b4%a2%e5%bc%95%e7%9a%84%e7%94%a8%e9%80%94 aria-label=索引的用途>索引的用途</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e6%95%b0%e9%87%8f%e6%8e%a7%e5%88%b6 aria-label=索引数量控制>索引数量控制</a></li><li><a href=#%e4%b8%bb%e9%94%ae%e5%87%86%e5%88%99 aria-label=主键准则>主键准则</a></li><li><a href=#%e9%87%8d%e8%a6%81%e7%9a%84sql%e5%bf%85%e9%a1%bb%e8%a2%ab%e7%b4%a2%e5%bc%95 aria-label=重要的SQL必须被索引>重要的SQL必须被索引</a></li><li><a href=#%e5%8c%ba%e5%88%86%e5%ba%a6%e6%9c%80%e5%a4%a7%e7%9a%84%e5%ad%97%e6%ae%b5%e6%94%be%e5%9c%a8%e5%89%8d aria-label=区分度最大的字段放在前>区分度最大的字段放在前</a></li><li><a href=#%e6%a0%b8%e5%bf%83sql%e4%bc%98%e5%85%88%e8%80%83%e8%99%91%e8%a6%86%e7%9b%96%e7%b4%a2%e5%bc%95 aria-label=核心SQL优先考虑覆盖索引>核心SQL优先考虑覆盖索引</a></li><li><a href=#%e9%81%bf%e5%85%8d%e5%86%97%e4%bd%99%e5%92%8c%e9%87%8d%e5%a4%8d%e7%b4%a2%e5%bc%95 aria-label=避免冗余和重复索引>避免冗余和重复索引</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e4%b8%8d%e6%98%af%e8%b6%8a%e5%a4%9a%e8%b6%8a%e5%a5%bd aria-label=索引不是越多越好>索引不是越多越好</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=命名规范>命名规范<a hidden class=anchor aria-hidden=true href=#命名规范>#</a></h2><ul><li>库名、表名、字段名必须使用小写字母，并采用下划线分割</li><li>库名、表名、字段名禁用超过32个字符。须见名知意</li><li>库名、表名、字段名禁用使 MySQL保留字</li><li>临时库、表名必须以tmp为前缀，并以日期为后缀</li><li>备份库、表必须以bak为前缀，并以日期为后缀</li></ul><h2 id=基础规范>基础规范<a hidden class=anchor aria-hidden=true href=#基础规范>#</a></h2><ul><li>使用INNODB存储引擎</li><li>表字符集使用utf8mb4</li><li>所有表都需要添加注释</li><li>单表数据量建议控制在5000W以内</li><li>不在数据库中存储图片、文件等大数据</li><li>禁止在线上做数据库压力测试</li><li>禁止从测试、开发环境直连数据库</li></ul><h2 id=库表设计>库表设计<a hidden class=anchor aria-hidden=true href=#库表设计>#</a></h2><ul><li>禁止使用分区表</li><li>拆分大字段和访问频率低的字段，分离冷热数据</li><li>HASH进行散表，表名后缀使用十进制数，下标从0开始</li><li>按日期时间分表需符合YYYY[MM][DD][HH]格式</li><li>采用合适的分库分表策略。例如千库十表、十库百表等</li></ul><h2 id=字段设计>字段设计<a hidden class=anchor aria-hidden=true href=#字段设计>#</a></h2><ul><li>尽可能不使用TEXT、BLOB类型</li><li>DECIMAL代替FLOAT和DOUBLE存储精确浮点数</li><li>Simple is good</li><li>将字符转化为数字</li><li>使用TINYINT来代替ENUM类型</li><li>Generosity can be unwise</li><li>存储 “hello”时VARCHAR(5) VS VARCHAR(200)</li><li>Avoid null if possible</li><li>所有字段均定义为NOT NULL ! Smaller is usually better</li><li>使用UNSIGNED存储非负整数</li><li>INT类型固定占用4字节存储</li><li>使用timestamp存储时间</li><li>使用INT UNSIGNED存储IPV4</li><li>使用VARBINARY存储大写敏感的变 字符串</li><li>禁用在数据库中存储明文密码</li></ul><h2 id=索引规范>索引规范<a hidden class=anchor aria-hidden=true href=#索引规范>#</a></h2><h3 id=索引的用途>索引的用途<a hidden class=anchor aria-hidden=true href=#索引的用途>#</a></h3><ul><li>去重</li><li>加速定位</li><li>避免排序</li><li>覆盖索引</li></ul><h3 id=索引数量控制>索引数量控制<a hidden class=anchor aria-hidden=true href=#索引数量控制>#</a></h3><ul><li>单张表中索引数量不超过5个</li><li>单个索引中的字段数不超过5个</li><li>对字符串使用前缀索引，前缀索引长度不超过8个字符</li><li>建议优先考虑前缀索引，必要时可添加伪列并建立索引</li></ul><h3 id=主键准则>主键准则<a hidden class=anchor aria-hidden=true href=#主键准则>#</a></h3><ul><li>表必须有主键</li><li>不使用更新频繁的列</li><li>尽量不选择字符串列</li><li>不使用UUID MD5 HASH</li><li>默认使用非空的唯一键</li><li>建议选择自增或发号器</li></ul><h3 id=重要的sql必须被索引>重要的SQL必须被索引<a hidden class=anchor aria-hidden=true href=#重要的sql必须被索引>#</a></h3><ul><li>UPDATE、DELETE语句的WHERE条件列</li><li>ORDER BY、GROUP BY、DISTINCT的字段</li><li>多表JOIN的字段</li></ul><h3 id=区分度最大的字段放在前>区分度最大的字段放在前<a hidden class=anchor aria-hidden=true href=#区分度最大的字段放在前>#</a></h3><h3 id=核心sql优先考虑覆盖索引>核心SQL优先考虑覆盖索引<a hidden class=anchor aria-hidden=true href=#核心sql优先考虑覆盖索引>#</a></h3><h3 id=避免冗余和重复索引>避免冗余和重复索引<a hidden class=anchor aria-hidden=true href=#避免冗余和重复索引>#</a></h3><h3 id=索引不是越多越好>索引不是越多越好<a hidden class=anchor aria-hidden=true href=#索引不是越多越好>#</a></h3><ul><li>综合评估数据密度和分布</li><li>考虑查询和更新比例</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.88886688.xyz/tags/mysql/>mysql</a></li></ul><nav class=paginav><a class=prev href=https://blog.88886688.xyz/posts/2017-09-14-thinkphp%E5%AE%9E%E7%8E%B0%E7%82%B9%E5%87%BB%E6%8E%92%E5%BA%8F/><span class=title>« Prev</span><br><span>tp3.2.3实现支持点击排序</span></a>
<a class=next href=https://blog.88886688.xyz/posts/2017-09-08-apache2-ssl/><span class=title>Next »</span><br><span>apache2开启SSL</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2017-2023 <a href=https://blog.88886688.xyz/>Lester's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br><span>Email: <a href=mailto:lestat9527@gmail.com>lestat9527@gmail.com</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>