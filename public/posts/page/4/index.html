<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Lester's Blog</title><meta name=keywords content><meta name=description content="Posts - Lester's Blog"><meta name=author content><link rel=canonical href=https://blog.88886688.xyz/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.84a638ec294a2a547ea8ea3f2466d240b38b987cbbb815b534c0442ed8d517d7.css integrity="sha256-hKY47ClKKlR+qOo/JGbSQLOLmHy7uBW1NMBELtjVF9c=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.88886688.xyz/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.88886688.xyz/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.88886688.xyz/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.88886688.xyz/apple-touch-icon.png><link rel=mask-icon href=https://blog.88886688.xyz/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.88886688.xyz/posts/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Posts"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://blog.88886688.xyz/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.88886688.xyz/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.88886688.xyz/ accesskey=h title="Lester's Blog (Alt + H)">Lester's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.88886688.xyz/ title="Lester's Blog"><span>Home</span></a></li><li><a href=https://blog.88886688.xyz/tags/ title=Tags><span>Tags/分类</span></a></li><li><a href=https://blog.88886688.xyz/about/ title="About Me"><span>About/关于</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://blog.88886688.xyz/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2>docker搭建gitlab和svn服务</h2></header><div class=entry-content><p>之前公司里的代码都是托管到局域网服务器上的,现在由于部分同事远程办公的需要,计划把git和svn都转到公网的centos服务器上去,但是gitlab的配置是真心费时间,所以决定用docker来做这个事情,以下是一些步骤和总结
使用daocloud给docker加个速先… 可以通过这个链接里面的命令给docker改个源,不然速度慢死…
gitlab安装 拉取镜像 docker pull gitlab/gitlab-ce:latest 新建授权用户 useradd -d /home/gitlab -s /bin/sh -m gitlab 后台运行容器,指定域名,端口映射关系,目录映射关系,将容器命名为gitlab,方便后续操作 docker run --detach \ --hostname git.vcs.trycheers.com \ --publish 10443:443 --publish 10080:80 --publish 10022:22 \ --name gitlab \ --restart always \ --volume /home/gitlab/config:/etc/gitlab \ --volume /home/gitlab/logs:/var/log/gitlab \ --volume /home/gitlab/data:/var/opt/gitlab \ gitlab/gitlab-ce:latest 用apache对10080端口进行反代,使之能够通过域名访问 &lt;VirtualHost *:80> ServerName hostname ProxyPreserveHost On ProxyPass / http://localhost:10080/ ProxyPassReverse / http://localhost:10080/ &lt;/VirtualHost> svn安装 后台运行容器,指定端口映射关系,目录映射关系,将容器命名为svn,方便后续操作 docker run -d -p 9200:80 -p 9201:443 -v /home/subversion/svn:/var/local/svn -v /home/subversion/svn_backup:/var/svn-backup -v /home/subversion/svn_conf/:/etc/apache2/dav_svn/ --name svn marvambass/subversion 添加svn用户 htdigest /home/subversion/svn_conf/dav_svn....</p></div><footer class=entry-footer><span title='2018-05-21 22:39:11.923 +0000 UTC'>May 21, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;106 words</footer><a class=entry-link aria-label="post link to docker搭建gitlab和svn服务" href=https://blog.88886688.xyz/posts/2018-05-21-docker%E6%90%AD%E5%BB%BAgitlab%E5%92%8Csvn%E6%9C%8D%E5%8A%A1/></a></article><article class=post-entry><header class=entry-header><h2>树莓派玩耍记</h2></header><div class=entry-content><p>这篇文章是自己入手树莓派之后的一些使用记录
前些天看 v2ex 上有人讨论树莓派，于是出于好奇在淘宝上淘了一只树莓派来玩玩
体积超级小…
一个板子,一个塑料盒子装上完工 刚开始的时候尝试了一下官方的NOOBS工具安装raspbian系统,这个系统是为树莓派定制的基于Debian的 linux 系统,但不知什么原因总是间歇性卡死,加之个人偏好 ubuntu 一点,于是安装了Ubuntu_MATE
系统安装基本步骤: 下载系统镜像 将下载的ubuntu-mate-16.04.2-desktop-armhf-raspberry-pi.img镜像解压后使用dd命令将镜像写入到 sd 卡中(我的环境为 macOS),注意写入完成后一定要使用unmount将 sd 卡推出,然后拔出 sd 卡 将 sd 卡插入树莓派,并连接好所有外设后开机,然后像安装 QQ 一样完成了Ubuntu_MATE的安装过程 简易播报系统: 当时冒出一个想法:写一个每天定时播放未来两天天气预报的小程序(非彼小程序),涉及的功能点:天气预报接口;一个基于轻量级的 api 框架实现的 api;一个定时任务;一个文字转语音脚本;一个音频文件播放器;当然还需要一个外接小音箱…
于是安装了 lnmp 环境(当下没有用到 mysql),mplayer,git,文字转音频使用的百度sdk(php),通过 git 安装了lumen
接口开发 路由 $router->get('/get_weather','WeatherController@getWeather'); 控制器WeatherController.php &lt;?php namespace App\Http\Controllers; use GuzzleHttp\Client; use Illuminate\Support\Facades\Cache; class WeatherController extends Controller { /** * Create a new controller instance. * * @return void */ public function __construct() { // } //基于树莓派的简易天气预报系统 public function getWeather() { //获取天气信息 $client = new Client(); // 实例化 $city = '成都'; $city_code = urlencode($city); $aqi = [ '好', '中等', '不适于敏感人群', '不健康', '非常不健康', '危险', ]; if (Cache::has('report') === false) { $url = 'https://www....</p></div><footer class=entry-footer><span title='2018-04-14 22:39:11.923 +0000 UTC'>April 14, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;392 words</footer><a class=entry-link aria-label="post link to 树莓派玩耍记" href=https://blog.88886688.xyz/posts/2018-04-14-%E6%A0%91%E8%8E%93%E6%B4%BE%E7%8E%A9%E8%80%8D%E8%AE%B0/></a></article><article class=post-entry><header class=entry-header><h2>关于mysql查询语句的一次问题记录</h2></header><div class=entry-content><p>最近在开发一个公司内部使用的财务报表系统,在一次查询时数据库报了一个错误,在网上查看原因并解决问题之后顺便记录一下,该sql的目标是从日报主表,日报月数据表,日报模块表中查询到指定经营公司,指定日期的当日汇总数据(包含部分当月数据用于后续计算)
问题sql如下:
SELECT A1.depcode AS depcode, SUM(d_dd_xcddsntq) AS sntq, ( SELECT ( SUM(d_jk_scddldl) + SUM(d_jk_zcddldl) + SUM(d_jk_hdjkl) ) AS bysj FROM mall_daily A LEFT JOIN mall_daily_jk B ON A.id = B.d_id LEFT JOIN mall_daily_month C ON A.depcode = C.depcode AND A.d_datetime >= C. START AND A.d_datetime &lt;= C. END WHERE A.d_date >= DATE_FORMAT('2018-03-01', '%Y-%m-%d') AND A.d_date &lt;= DATE_FORMAT('2018-03-21', '%Y-%m-%d') AND A.depcode = A1.depcode ) AS aj13, ( SELECT SUM(B.d_dd_xcztdd) AS bysj FROM mall_daily A LEFT JOIN mall_daily_dd B ON A....</p></div><footer class=entry-footer><span title='2018-04-03 22:39:11.923 +0000 UTC'>April 3, 2018</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;448 words</footer><a class=entry-link aria-label="post link to 关于mysql查询语句的一次问题记录" href=https://blog.88886688.xyz/posts/2018-04-03-%E5%85%B3%E4%BA%8Emysql%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%80%E6%AC%A1%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/></a></article><article class=post-entry><header class=entry-header><h2>frp+nginx实现内网穿透</h2></header><div class=entry-content><p>写在前面:上一篇文章写了关于ngrok+nginx实现内网穿透的流程,并提出了一些存在的问题,昨天试过frp之后,将之前ngrok存在的无法映射本地域名的问题解决了
frp 是一个可用于内网穿透的高性能的反向代理应用，支持 tcp, udp, http, https 协议。
先决条件 有一个域名,并解析到自己服务器上,如:*.frp.lestat.me
有一个具备固定ip的公网服务器
系统环境 假设环境为:
服务器OS:ubuntu17.10
客户端OS:macOS High Sierra
以下内容将按照上述环境进行搭建
部署 相对于ngrok还需要编译源码,frp方便很多,真正的开箱即用
服务器 下载对应操作系统的frp服务端&客户端至服务器和内网电脑 wget https://github.com/fatedier/frp/releases/download/v0.16.1/frp_0.16.1_linux_amd64.tar.gz 解压 tar zxf ./frp_0.16.1_linux_amd64.tar.gz cd ./frp_0.16.1_linux_amd64 ll 目录结构如下(不同版本可能有差异,但大致相似): -rw-rw-r-- 1 kcptun kcptun 11358 Mar 21 10:11 LICENSE -rwxrwxr-x 1 kcptun kcptun 6154432 Mar 21 10:10 frpc* -rw-rw-r-- 1 kcptun kcptun 126 Mar 21 10:11 frpc.ini -rw-rw-r-- 1 kcptun kcptun 5306 Mar 21 10:11 frpc_full.ini -rwxrwxr-x 1 kcptun kcptun 7586848 Mar 21 10:10 frps* -r--r----- 1 root root 11207 Mar 25 15:38 frps....</p></div><footer class=entry-footer><span title='2018-03-26 22:39:11.923 +0000 UTC'>March 26, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;383 words</footer><a class=entry-link aria-label="post link to frp+nginx实现内网穿透" href=https://blog.88886688.xyz/posts/2018-03-26-frp+nginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/></a></article><article class=post-entry><header class=entry-header><h2>ngrok+nginx实现内网穿透</h2></header><div class=entry-content><p>写在前面:
前天在qq群里看到有人在讨论替代花生壳的工具，说到了ngrok，说是可以实现花生壳一样的内网穿透，个人认为主要有以下几个用处:
可以在公司测试服务器上搭建一个服务,实现测试站点的本地访问(公网访问本地服务器)，在这之前通常是上传网站到服务器并解析一个子域名，相对比较费时 微信接口开发的时候优势更明显，因为微信的OAuth一类认证需要一个公网域名且端口必须是80/443(也是本文需要用到nginx做反向代理的原因之一) 欢迎补充… ngrok1.x介绍(2.x没有开源官网) ngrok1.x源码github地址
如上封面图所示
橘色屏幕的笔记本是你的工作机器，安装了ngrok客户端 ngrok.com所在的服务器安装了ngrok的服务端（ngrokd） 利用ngrok 8080命令可以将你本机的8080端口暴露给反向代理至ngrok.com的某个二级域名如：.ngrok.com 公网用户可以通过.ngrok.com就可以访问你本机8080端口上的站点内容了。 由此可见，借助ngrok，可以解决web项目(尤其是微信接口相关)开发过程经常遇到的“本地开发，外网调试”问题。
先决条件 有一个域名,并解析到自己服务器上,如:*.ngrok.lestat.me 有一个具备固定ip的公网服务器 部署 基本步骤:安装go环境->下载ngrok源码->使用go编译ngrok以及相关环境变量的设置->证书配置->运行ngrok服务器端并指定监听的http/https端口->nginx配置文件中对上一步中相关端口做反向代理配置->重启nginx->生成对应OS(linux,darwin,windows)的客户端->本地机器下载上一步生成的客户端->本地新建配置文件ngrok.cfg->本地运行客户端并指定配置文件->出现online则说明穿透成功
一个例子 数据准备 本机地址 IP：127.0.0.1，HTTP 为 80 外网地址 IP：45.77.14.6，HTTP 为 80(NGINX监听该端口,并对*.ngrok.lestat.me域名进行转发到服务器的60端口) 域名为：http://*.ngrok.lestat.me
预期结果 外网访问 http://*.ngrok.lestat.me可以访问到本机上80端口提供的网站
下文按照前面的例子来搭建
Go环境的安装 下载并解压GOLANG wget -c https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz tar -C /usr/local -zxvf go1.8.3.linux-amd64.tar.gz 设置相关环境变量 export GOROOT=/usr/local/go export PATH=$PATH:$GOROOT/bin export GOPATH=$HOME/go export GOROOT_BOOTSTRAP=/usr/local/go 检查安装是否成功
go version 安装ngrok 下载并配置参数 cd /usr/local/ git clone https://github.com/inconshreveable/ngrok.git export GOPATH=/usr/local/ngrok/ export NGROK_DOMAIN="ngrok.lestat.me" cd ngrok 生成证书 openssl genrsa -out rootCA....</p></div><footer class=entry-footer><span title='2018-03-24 22:39:11.923 +0000 UTC'>March 24, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;358 words</footer><a class=entry-link aria-label="post link to ngrok+nginx实现内网穿透" href=https://blog.88886688.xyz/posts/2018-03-24-ngrok+nginx%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/></a></article><article class=post-entry><header class=entry-header><h2>浅谈shadowsocks中的pac配置</h2></header><div class=entry-content><p>大概是从去年开始使用的shadowsocks实现科学上网,当时在配置完代理服务器之后能够用了就没管其他的配置。
直到最近想在维基百科上注册一个账号的时候发现
由于一些原因,当前使用代理的ip被封禁了
由于GFW是通过dns污染的方式屏蔽了zh.wikipedia.org(其他语言的wikipedia其实是可以在国内直接访问的比如英文站),这个问题可以通过关闭代理并修改hosts文件解决,但这样太麻烦,因为需要定期更新hosts文件的ip地址,后来google了一下发现shadowsocks里面有一个名为pac的文件,这个文件的域名列表来自于GFWlist,而正是这个文件决定了shadowsocks处于pac模式时哪些域名需要被代理,在这个文件之外的域名都会直接访问。因此,解决维基的ip封禁且要继续使用代理上网只需要2个步骤
修改本地hosts为wikipedia中文当前的ip(解决dns污染) 修改pac文件中的配置,将wikipedia.org相关的配置去掉即可 PAC的优势 PAC自动代理属于智能判断模式，相比全局代理，它的优点有：
不影响国内网站的访问速度，防止无意义的绕路 节省Shadowsocks服务的流量，节省服务器资源 控制方便</p></div><footer class=entry-footer><span title='2018-02-14 22:39:11.923 +0000 UTC'>February 14, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words</footer><a class=entry-link aria-label="post link to 浅谈shadowsocks中的pac配置" href=https://blog.88886688.xyz/posts/2018-02-14-%E6%B5%85%E8%B0%88shadowsocks%E4%B8%AD%E7%9A%84pac%E9%85%8D%E7%BD%AE/></a></article><article class=post-entry><header class=entry-header><h2>近期工作中的收获</h2></header><div class=entry-content><p>眼下快要过年了,手头的项目也终于接近尾声,抽点时间来记录下近段时间的工作心得
前段时间在工作之余我抽空看了一些ECMA6的语法,简单学习了一下webpack,了解了babel,后面也尝试着使用vue-cli搭建自己的demo并熟悉其中的结构
说说最近做的一个项目:一个接口开发(前端)项目,接口由客户提供(java开发,json数据格式),我方负责移动端web开发和后台页面的开发,并调试好所有接口(后端接口情况:权限相关[14],会员模块[10],片库[14],,出品[19],媒体[15],资讯[11],直通车[14],ip活动[12],营销联盟[13])
刚拿到需求的时候我还是比较担心能否搞定,毕竟作为一个phper之前的确没有搞过spa的开发,但之前做了那么多spa的功课,也觉得是时候真正的实践一下了,于是很快找到了一个基于vue+elementui的后台框架vue-element-admin,据我最近观察,这个项目在github上每天平均增加将近100个star…
这个框架替我们完成了很多基本方法的封装,路由访问权限,页眉标签切换,常用的各种表格,表单等;开发起来效率相对较高,在我后来实际的开发中也应证了这点
最后花了两周时间,搭建了一个小型后台管理系统并完成所有接口的调试
使用vue做开发的感觉就是代码比曾经用jq的项目更规范(也可能是因为框架中引入了eslint,配合vscode的eslint+prettier一键格式化,实现简单操作就能遵循eslint代码规范);由于vue-cli已经将webpack,babel打包好,并且实现了ctrl+s自动刷新页面预览且不会清空console里面的内容,开发的体验变得非常好。
强烈推荐chrome的Vue DevTools插件,安装完成后可以在chrome右上方看到vue的logo,在dev模式下的页面可以直接看到开发者工具的标签栏多出一个Vue标签,点击即可查看到当前页面的信息!
目前为止,自己对vue的了解还不够深入,对vuex,组件的使用还不够灵活,还需要更多的实践
新的一年,继续加油!</p></div><footer class=entry-footer><span title='2018-02-07 22:39:11.923 +0000 UTC'>February 7, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words</footer><a class=entry-link aria-label="post link to 近期工作中的收获" href=https://blog.88886688.xyz/posts/2018-02-07-%E8%BF%91%E6%9C%9F%E5%B7%A5%E4%BD%9C%E4%B8%AD%E7%9A%84%E6%94%B6%E8%8E%B7/></a></article><article class=post-entry><header class=entry-header><h2>Vue开发中的一些总结</h2></header><div class=entry-content><p>关于axios的使用细节 基于vue做spa开发,个人很多时候使用的请求扩展是axios,这个扩展会把常用的请求封装好发送出去,使用的时候只需要传参数即可。今天遇到的一个问题是后端接口接收get方式传参,我这边有一个数组需要通过get方式传递过去,假设数组名称是:ids,请求中默认就是ids[]的形式,接口需要提供ids的形式,此时需要引入qs扩展,并在请求位置添加一项配置,以转换参数格式,示例代码如下:
/* * todo :会员审核列表的通过与驳回(批量和单个为同一个方法), 需要管理员登陆 * @param data object * */ export function userInfoCheck(data) { return request({ url: '/backend/userInfoCheck', method: 'get', params: data, paramsSerializer: function(params) { return qs.stringify(params, { arrayFormat: 'repeat' }) } }) }</p></div><footer class=entry-footer><span title='2018-01-26 22:39:11.923 +0000 UTC'>January 26, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;37 words</footer><a class=entry-link aria-label="post link to Vue开发中的一些总结" href=https://blog.88886688.xyz/posts/2018-01-26-vue%E5%BC%80%E5%8F%91%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%BB%86%E8%8A%82/></a></article><article class=post-entry><header class=entry-header><h2>关于vue中$nextTick的一点使用心得</h2></header><div class=entry-content><p>当下公司在做一个媒体门户网站,后台由另一家公司使用java开发并提供接口,本人负责开发后台页面,使用的是vue-element-admin开发
下面说一下问题场景,在开发过程中有一个后台管理员角色页面,其中包含一个表单dialog,在其中使用了el-tree组件,相关 代码结构如下:
&lt;div class="filter-container"> &lt;el-button class="filter-item" style="margin-left: 10px;" v-waves @click="handleCreate" type="primary" icon="el-icon-edit">新增角色 &lt;/el-button> &lt;/div> &lt;el-dialog :title="textMap[dialogStatus]" :visible.sync="dialogFormVisible" width="50%"> &lt;el-form :rules="rules" ref="dataForm" :model="temp" label-position="top" label-width="90px" style='width: 400px; margin-left:50px;'> &lt;el-form-item label="选择权限" prop="sysPermission"> &lt;el-tree ref="tree" :data="sysPermission" :props="formProps" show-checkbox @check-change="handleCheckChange" node-key="id">&lt;/el-tree> &lt;/el-form-item> &lt;/el-form> &lt;/el-dialog> 相关的js如下:
export default { name: 'sysRoleList', data() { return { tableKey: 0, list: null, total: null, listLoading: true, formLoading: true, listQuery: { page: 1, limit: 20, importance: undefined, title: undefined, type: undefined, sort: '+id' }, dialogFormVisible: false, dialogStatus: 'update', textMap: { update: '编辑角色', create: '新增角色' }, rules: { sysRoleName: [{required: true, message: '必须填写角色名称', trigger: 'blur'}] }, // 表单数据 temp: { id: '', sysPermissionList: [], sysRoleName: '' }, currentKeys: [], // 表单权限字段映射 formProps: { label: 'sysPermissionName' }, sysPermission: {} } }, created() { // 列表数据 // this....</p></div><footer class=entry-footer><span title='2018-01-24 22:39:11.923 +0000 UTC'>January 24, 2018</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;272 words</footer><a class=entry-link aria-label="post link to 关于vue中$nextTick的一点使用心得" href=https://blog.88886688.xyz/posts/2018-01-24-vue%E5%BC%80%E5%8F%91%E4%B8%AD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%B0%8F%E7%BB%93/></a></article><article class=post-entry><header class=entry-header><h2>certbot+letsencrypt配置免费单证书多域名ssl证书</h2></header><div class=entry-content><p>前些天看到微信公众平台官方公告关于公众平台接口不再支持HTTP方式调用的公告之后决定把项目的协议从http改成https,于是开始在网上查,完成之后总结了一点经验
本文演示的是通用证书,即在certbot命令中不需要指定--apache或者--nginx之类,只需要在完成证书生成之后在服务器配置文件里进行引用即可
Let’s Encrypt Let’s Encrypt 认证签发为每3个月一次，也就是每 90 天必须更新（renew）一次。取得认证的过程需要进主机安裝代理程序:certbot,下面以ubuntu为例:
安装 $ sudo apt-get update $ sudo apt-get install software-properties-common $ sudo add-apt-repository ppa:certbot/certbot $ sudo apt-get update $ sudo apt-get install certbot 生成证书 $ sudo certbot certonly 此时会出现选项,按照提示选择即可
证书自动续期可以使用 certbot renew --force-renew 手动强制为证书续期
如果出现以下提示则说明更新成功
Congratulations, all renewals succeeded. The following certs have been renewed: 但为了更方便,通常使用crontab -e编辑定时任务,并加入
0 0 1 * * certbot renew --force-renew “重启服务器命令” 实现每个月1号0点自动续期
在服务器配置相关证书 apache2开启SSL
tips: 如果有多个域名...</p></div><footer class=entry-footer><span title='2018-01-03 22:39:11.923 +0000 UTC'>January 3, 2018</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;108 words</footer><a class=entry-link aria-label="post link to certbot+letsencrypt配置免费单证书多域名ssl证书" href=https://blog.88886688.xyz/posts/2018-01-03-certbot-letsencrypt%E9%85%8D%E7%BD%AEssl%E8%AF%81%E4%B9%A6/></a></article><footer class=page-footer><nav class=pagination><a href=https://blog.88886688.xyz/posts/>«&nbsp;First&nbsp;</a>
&nbsp;
<a class=prev href=https://blog.88886688.xyz/posts/page/3/>«&nbsp;Prev&nbsp;</a>
<a class=next href=https://blog.88886688.xyz/posts/page/5/>Next&nbsp;&nbsp;»</a>
&nbsp;
<a href=https://blog.88886688.xyz/posts/page/6/>Last&nbsp;
&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2017-2023 <a href=https://blog.88886688.xyz/>Lester's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br><span>Email: <a href=mailto:lestat9527@gmail.com>lestat9527@gmail.com</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>